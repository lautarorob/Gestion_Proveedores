<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="jakarta.faces.facelets"
                template="./../template/layout.xhtml" xmlns:f="jakarta.faces.core" xmlns:h="jakarta.faces.html">

    <ui:define name="contenido">
        <f:view>
            <h:form>

                <h2><strong>Proveedores</strong></h2>
                <div class="linea-titulo"></div>

                <h:commandButton value=" + Dar de alta proveedor" action="/proveedores/nuevo.xhtml"
                                 styleClass="btnAmarillo" />

                <!-- BARRA DE Filtrado -->      
                <h:selectOneMenu id="proveedor" value="#{controladorProveedor.proveedorSeleccionado}" styleClass="form-select" style="background-color: #020618">
                    <f:selectItem itemLabel="Todos los proveedores" itemValue="" />
                    <f:selectItems value="#{controladorProveedor.listaProveedores}"
                                   var="prov"
                                   itemLabel="#{prov.razonSocial}"
                                   itemValue="#{prov.idProveedor}" />
                </h:selectOneMenu>
                <div style="margin-top:15px; display:flex; gap:10px;">
                    <h:commandLink 
                        action="#{controladorProveedor.buscarProveedor}"
                        styleClass="btnAmarillo d-flex align-items-center">
                        <i class="bi bi-funnel" style="margin-right:5px;"></i>
                        Aplicar filtro
                    </h:commandLink>
                    <h:commandButton value="Limpiar" 
                                     action="#{controladorProveedor.limpiarFiltro}"
                                     style="margin-left: 10px;" class="btnAmarillo"/>
                </div>

                <h:dataTable value="#{controladorProveedor.listaProveedores}" var="item" styleClass="tablaProveedores" cellpadding="6">

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="RazonSocial" style="margin-right: 50px" />
                        </f:facet>
                        <h:outputText value="#{item.razonSocial}" style="margin-right: 50px" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Cuit" style="margin-right: 50px" />
                        </f:facet>
                        <h:outputText value="#{item.cuit}" style="margin-right: 50px" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="NombreComercial" style="margin-right: 50px" />
                        </f:facet>
                        <h:outputText value="#{item.nombreComercial}" style="margin-right: 50px" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Telefono" style="margin-right: 50px" />
                        </f:facet>
                        <h:outputText value="#{item.telefono}" style="margin-right: 50px" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Email" style="margin-right: 50px" />
                        </f:facet>
                        <h:outputText value="#{item.email}" style="margin-right: 50px" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Estado" style="margin-right: 50px" />
                        </f:facet>
                        <h:outputText value="#{item.estado ? 'Activo' : 'Inactivo'}" style="margin-right: 50px" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="TipoIva" style="margin-right: 50px" />
                        </f:facet>
                        <h:outputText value="#{item.tipoIva}" style="margin-right: 50px" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Acciones" />
                        </f:facet>
                        <div class="botonesAcciones">
                            <h:panelGroup rendered="#{item.estado}">
                                <h:link class="editarAcciones" outcome="/proveedores/editar.xhtml" style="margin-right: 10px">
                                    <f:param name="id" value="#{item.idProveedor}" />
                                    <i class="bi bi-pencil"></i>
                                </h:link>
                                <h:commandLink class="eliminarAcciones"
                                               action="#{controladorProveedor.bajaLogica(item.idProveedor)}"
                                               onclick="return confirm('¿Confirma la baja?')">
                                    <i class="bi bi-trash3"></i>
                                </h:commandLink>
                            </h:panelGroup>
                        </div>
                        <h:commandLink  class="reactivaAcciones" rendered="#{!item.estado}"
                                        action="#{controladorProveedor.reactivar(item.idProveedor)}"
                                        onclick="return confirm('¿Confirma la reactivacion?')">
                            <i class="bi bi-check2-circle"></i>
                            Reactivar</h:commandLink>
                    </h:column>

                </h:dataTable>
            </h:form>
        </f:view>
    </ui:define>

</ui:composition>